const readline = require('readline');
const rl = readline.createInterface({ input: process.stdin, output: process.stdout });
let employees = [];

function mainMenu() {
  console.log('\n========================================');
  console.log('  CLI Employee Management System');
  console.log('========================================');
  console.log('1. Add Employee');
  console.log('2. List Employees');
  console.log('3. Remove Employee');
  console.log('4. Exit');
  rl.question('Enter your choice: ', choice => {
    switch (choice.trim()) {
      case '1':
        addEmployee();
        break;
      case '2':
        listEmployees();
        break;
      case '3':
        removeEmployee();
        break;
      case '4':
        console.log('Exiting... Goodbye!');
        rl.close();
        break;
      default:
        console.log('Invalid choice. Please try again.');
        mainMenu();
    }
  });
}

function addEmployee() {
  rl.question('Enter Employee Name: ', name => {
    rl.question('Enter Employee ID: ', id => {
      if (!name || !id) {
        console.log('Name and ID are required.');
        mainMenu();
      } else if (employees.some(e => e.id === id)) {
        console.log('Employee ID already exists.');
        mainMenu();
      } else {
        employees.push({ name, id });
        console.log(' Employee added successfully!');
        mainMenu();
      }
    });
  });
}

function listEmployees() {
  console.log('\n----------------------------------------');
  console.log('Employee List:');
  if (employees.length === 0) console.log('No employees found.');
  else employees.forEach((e, i) => console.log(`${i + 1}. Name: ${e.name}, ID: ${e.id}`));
  console.log('----------------------------------------');
  mainMenu();
}

function removeEmployee() {
  rl.question('Enter Employee ID to remove: ', id => {
    const index = employees.findIndex(e => e.id === id);
    if (index === -1) console.log(' Employee not found.');
    else {
      employees.splice(index, 1);
      console.log(' Employee removed successfully!');
    }
    mainMenu();
  });
}

mainMenu();
